# Simple REST API Task - Quick Reference

This directory contains the complete task definition for the "Simple REST API with CRUD Operations" experiment task.

## Files Overview

### 1. TASK.md
**Purpose**: Primary task specification given to the AI agent

**Contains**:
- Complete problem statement
- Functional requirements (5 REST endpoints)
- Technical stack (TypeScript, Express, Zod, Vitest)
- Data model and validation rules
- Deliverables list
- Success criteria (P0/P1/P2)
- Example API usage
- Dependencies and setup

**Use**: Give this to the agent to implement the task

### 2. expected-structure.txt
**Purpose**: Reference for what the completed implementation should look like

**Contains**:
- Complete file structure tree
- Expected file contents per file
- Code organization patterns
- Response format examples
- Quality check commands
- Critical success indicators

**Use**: Validate the agent's output matches expected structure

### 3. validation-checklist.md
**Purpose**: Comprehensive validation and quality criteria

**Contains**:
- 11-phase validation process (174 total checks)
- Setup verification
- Type safety checks
- API endpoint validation
- Test coverage requirements
- Code quality standards
- Integration testing steps
- Success metrics

**Use**: Step-by-step verification of task completion

## Task Summary

**Objective**: Build a simple notes API with in-memory storage

**API Endpoints**:
- `GET /api/notes` - List all notes
- `GET /api/notes/:id` - Get single note
- `POST /api/notes` - Create note
- `PUT /api/notes/:id` - Update note
- `DELETE /api/notes/:id` - Delete note

**Tech Stack**:
- TypeScript (strict mode)
- Express.js
- Zod (validation)
- Vitest (testing)
- UUID (ID generation)

**Quality Gates**:
- ✓ 80% test coverage minimum
- ✓ Zero TypeScript errors
- ✓ Zero ESLint errors
- ✓ All tests passing

## Expected Outcomes

| Metric | Value |
|--------|-------|
| Total LOC | 700-1000 |
| Files Created | 10+ |
| Baseline Time | 38-45 min |
| With Meta Time | 25-30 min |
| Efficiency Gain | 30-35% |

## Experiment Usage

### Baseline Run (No Meta-Analysis)
```bash
# Agent receives TASK.md
# No prior meta-analysis available
# Expected: 38-45 minutes
# Expected: 40-50 turns
```

### Meta-Enabled Run (With Meta-Analysis)
```bash
# Agent receives TASK.md
# Has access to meta-analysis from baseline
# Expected: 25-30 minutes
# Expected: 25-30 turns
# Expected patterns reused: 5-8
```

## Validation Workflow

1. **Check File Structure**
   ```bash
   # Use expected-structure.txt
   # Verify all required files present
   ```

2. **Run Quality Checks**
   ```bash
   npm run type-check  # Zero errors
   npm run lint        # Zero errors
   npm test            # All passing
   npm run test:coverage  # >= 80%
   ```

3. **Validate Functionality**
   ```bash
   # Use validation-checklist.md Phase 10
   # Test all 5 endpoints manually
   ```

4. **Measure Metrics**
   - Turns taken
   - Time elapsed
   - Tool calls made
   - Web searches performed
   - Patterns referenced (if meta available)

## Success Criteria

### P0 (Must Have)
- [ ] All 5 endpoints functional
- [ ] TypeScript strict mode, zero errors
- [ ] Test coverage >= 80%
- [ ] All tests passing
- [ ] README with API docs

### P1 (Should Have)
- [ ] Proper HTTP status codes
- [ ] Structured error responses
- [ ] ESLint zero errors
- [ ] JSDoc comments

### P2 (Nice to Have)
- [ ] Request logging
- [ ] CORS support
- [ ] Environment variables

## Common Patterns (Meta-Learning Target)

These patterns should emerge in meta-analysis:

1. **Express Setup Pattern**
   - app.use(express.json())
   - Router creation
   - Error handling middleware

2. **Zod Validation Pattern**
   - Schema definition
   - .parse() in route handlers
   - Error formatting

3. **Storage Pattern**
   - Map-based in-memory storage
   - UUID generation
   - Timestamp management

4. **Testing Pattern**
   - Supertest for HTTP testing
   - Vitest for test runner
   - Setup/teardown per test

5. **Type Safety Pattern**
   - Interface-first design
   - No any types
   - Explicit return types

## Files Generated by Implementation

```
simple-rest-api/
├── package.json
├── tsconfig.json
├── .eslintrc.json
├── README.md
├── src/
│   ├── server.ts
│   ├── types/note.ts
│   ├── validators/note.ts
│   ├── storage/notes.ts
│   └── routes/notes.ts
└── tests/
    └── notes.test.ts
```

## Metrics Collection Points

- **Efficiency**: Turns, duration, tool calls, web searches
- **Quality**: Test coverage, type errors, lint errors
- **Learning**: Patterns reused, decisions referenced, searches avoided

## Notes for Experimenters

- Use consistent environment (Node.js 20+)
- Clear workspace between runs
- Capture full conversation transcript
- Measure wall-clock time accurately
- Document any deviations from spec
- Generate meta-analysis after baseline run

---

**Task Difficulty**: Simple
**Estimated Baseline**: 40-45 minutes
**Target Improvement**: 30-35% with meta-analysis
**Validation Rigor**: High (174 checks)
